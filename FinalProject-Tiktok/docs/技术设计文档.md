# 技术设计文档

## 1. 技术路线

## 2. API文档

### 2.1 用户API

#### 2.1.1 用户注册 POST -> /api/v1/users

* 资源标识：`/api/v1/users`

* 操作：POST

* 权限：无须权限

* 请求Payload

  ```json
  {
      "username": "exampleUser",
      "password": "password",
      "email": "example@email.com",
      "telephone": "10123456789"
  }
  ```

* 响应Payload

  ```json
  {
      "code": 200,
      "message": "Success.",
      "data": {
          "id": "1",
          "username": "exampleUser",
          "password": "password",
          "email": "example@email.com",
          "telephone": "10123456789"
      }
  }
  ```

#### 2.1.2 用户登入 POST -> /api/v1/sessions

* 资源表示：`/api/v1/sessions`

* 操作：POST

* 权限：无需权限

* 请求Payload

  ```json
  {
      "username": "exampleUser",
      "password": "password"
  }
  ```

* 响应Payload

  ```json
  {
      "code": 200,
      "message": "Success.",
      "data": {
          "user": {
          	"id": "1",
              "username": "exampleUser",
              "password": "password",
              "email": "example@email.com",
              "telephone": "10123456789", 
          },
          "token": "abcdefg1234567890"
      }
  }
  ```

#### 2.1.3 查询所有用户 GET -> /api/v1/users

* 资源表示：`/api/v1/users`

* 操作：GET

* 权限：Admin

* 请求Payload

  * 无

* 响应Payload

  ```json
  {
      "code": 200,
      "message": "Success.",
      "data": [
          {
              "id": "1",
              "username": "exampleUser",
              "password": "password",
              "email": "example@email.com",
              "telephone": "10123456789",
          }, {
              ...
          }
      ]
  }
  ```

#### 2.1.4 查询单个用户 GET -> /api/v1/users/{uuid}

* 资源表示：`/api/v1/users/{id}`

* 操作：GET

* 权限：Admin

* 参数

  ```json
  "id": "1"
  ```
  
* 请求Payload

  * 无

* 响应Payload

  ```json
  {
      "code": 200,
      "message": "Success.",
      "data": {
          "id": "1",
          "username": "exampleUser",
          "password": "password",
          "email": "example@email.com",
          "telephone": "10123456789"
      }
  }
  ```

### 2.2 视频API

#### 2.2.1 添加视频 POST -> /api/v1/videos

#### 2.2.2 查询所有视频 GET -> /api/v1/videos

#### 2.2.3 查询单个视频 GET -> /api/v1/videos/{uuid}

#### 2.2.4 删除单个视频 DELETE -> /api/v1/videos/{uuid}

#### 2.2.5 获取我的视频 GET -> /api/v1/playable_videos/{uuid}

#### 2.2.6 给视频点一个赞 POST -> /api/v1/videos/{uuid}/likes

#### 2.2.7 查询视频点赞数 GET -> /api/v1/videos/{uuid}/likes

#### 2.2.8 获取推荐视频 GET -> /api/v1/videos/recommendations 